<body style="background:black; margin:0; overflow:hidden; color:white;">

<center style="margin-top:20vh;">
    <button class="fullscreen-button" onclick="openGame(GAME_1)">
        Play Game 1
    </button>
    <br><br>
    <button class="fullscreen-button" onclick="openGame(GAME_2)">
        Play Game 2
    </button>
</center>

<!-- Overlay -->
<div id="overlay" class="overlay" style="display:none;">
    <div class="game-modal" id="gameModal">

        <!-- iframe -->
        <iframe id="gameFrame"></iframe>

        <!-- controls (hidden until hover) -->
        <div class="controls">
            <button onclick="toggleFullscreen()">⛶</button>
            <button onclick="closeGame()">✕</button>
        </div>

    </div>
</div>

<style>
.fullscreen-button {
    width: 40%;
    height: 10%;
    background: #000;
    color: #fff;
    border: 2px solid #fff;
    border-radius: 10px;
    font: 20px monospace;
    cursor: pointer;
    transition: transform 0.2s ease-out;
}
.fullscreen-button:hover {
    transform: scale(1.1);
}

/* Overlay */
.overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    z-index: 999;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Modal */
.game-modal {
    position: relative;
    width: 80vw;
    height: 80vh;
    background: black;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 0 30px #000;
}

/* iframe with border */
.game-modal iframe {
    width: calc(100% - 4px);
    height: calc(100% - 4px);
    margin: 2px;
    border: 2px solid white;
}

/* Controls (hidden) */
.controls {
    position: absolute;
    bottom: 8px;
    right: 8px;
    display: flex;
    gap: 6px;
    opacity: 0;
    transition: opacity 0.2s ease;
}

/* Show controls on hover */
.game-modal:hover .controls {
    opacity: 1;
}

/* Control buttons */
.controls button {
    background: black;
    color: white;
    border: 2px solid white;
    border-radius: 6px;
    padding: 4px 8px;
    font: 16px monospace;
    cursor: pointer;
}

.controls button:hover {
    background: white;
    color: black;
}
</style>

<script>
const GAME_1 =
  "https://cdn.jsdelivr.net/gh/ToxicBurstXZ/b-stuff@2-123-321/mcX.html";

const GAME_2 =
  "https://cdn.jsdelivr.net/gh/ToxicBurstXZ/gs-assets@main/gem-names/2.xml";

async function openGame(url) {
    const overlay = document.getElementById("overlay");
    const iframe = document.getElementById("gameFrame");

    try {
        const res = await fetch(url);
        let html = await res.text();

        const base = url.substring(0, url.lastIndexOf("/") + 1);
        html = html.replace(/<head>/i, `<head><base href="${base}">`);

        iframe.srcdoc = html;
        overlay.style.display = "flex";
    } catch (err) {
        console.error(err);
        alert("Failed to load game.");
    }
}

function closeGame() {
    const overlay = document.getElementById("overlay");
    const iframe = document.getElementById("gameFrame");

    if (document.fullscreenElement) {
        document.exitFullscreen();
    }

    iframe.srcdoc = "";
    overlay.style.display = "none";
}

function toggleFullscreen() {
    const modal = document.getElementById("gameModal");

    if (!document.fullscreenElement) {
        modal.requestFullscreen();
    } else {
        document.exitFullscreen();
    }
}
</script>
