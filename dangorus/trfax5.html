<body style="background:black; margin:0; overflow:hidden; color:white;">

<center style="margin-top:20vh;">
    <button class="fullscreen-button" onclick="openGame(GAME_1, 'Game 1')">Play Game 1</button>
    <br><br>
    <button class="fullscreen-button" onclick="openGame(GAME_2, 'Game 2')">Play Game 2</button>
</center>

<!-- Overlay -->
<div id="overlay" class="overlay" style="display:none;">
    <div class="game-modal" id="gameModal">

        <!-- iframe wrapper -->
        <div class="iframe-wrapper">
            <iframe id="gameFrame"></iframe>
        </div>

        <!-- bottom bar -->
        <div class="controls" id="controls">
            <span class="game-title" id="gameTitle">Game</span>
            <div class="control-buttons">
                <button onclick="toggleFullscreen()">⛶</button>
                <button onclick="closeGame()">✕</button>
            </div>
        </div>

    </div>
</div>

<style>
.fullscreen-button {
    width: 40%;
    height: 10%;
    background: #000;
    color: #fff;
    border: 2px solid #fff;
    border-radius: 10px;
    font: 20px monospace;
    cursor: pointer;
}

/* Overlay */
.overlay {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.7);
    z-index: 999;
    display: flex;
    justify-content: center;
    align-items: center;
}

/* Modal */
.game-modal {
    width: 80vw;
    height: 80vh;
    background: black;
    border-radius: 12px;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

/* iframe wrapper */
.iframe-wrapper {
    flex: 1;
    margin: 8px;
    border: 2px solid white;
    border-radius: 6px;
    overflow: hidden;
}

.iframe-wrapper iframe {
    width: 100%;
    height: 100%;
    border: none;
}

/* bottom bar */
.controls {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 8px 12px;
    border-top: 2px solid white;
}

/* game name */
.game-title {
    font: 16px monospace;
    opacity: 0.9;
}

/* buttons */
.control-buttons {
    display: flex;
    gap: 8px;
}

.controls button {
    background: black;
    color: white;
    border: 2px solid white;
    border-radius: 6px;
    padding: 4px 10px;
    font: 16px monospace;
    cursor: pointer;
}

.controls button:hover {
    background: white;
    color: black;
}

/* ===== FULLSCREEN MODE ===== */

/* remove rounded corners & borders */
:fullscreen .game-modal {
    width: 100vw;
    height: 100vh;
    border-radius: 0;
}

:fullscreen .iframe-wrapper {
    margin: 0;
    border: none;
    border-radius: 0;
}

/* hide bottom bar in fullscreen */
:fullscreen .controls {
    display: none;
}
</style>

<script>
const GAME_1 =
  "https://cdn.jsdelivr.net/gh/ToxicBurstXZ/b-stuff@2-123-321/mcX.html";

const GAME_2 =
  "https://cdn.jsdelivr.net/gh/ToxicBurstXZ/gs-assets@main/gem-names/2.xml";

async function openGame(url, name) {
    const overlay = document.getElementById("overlay");
    const iframe = document.getElementById("gameFrame");
    const title = document.getElementById("gameTitle");

    const res = await fetch(url);
    let html = await res.text();

    const base = url.substring(0, url.lastIndexOf("/") + 1);
    html = html.replace(/<head>/i, `<head><base href="${base}">`);

    iframe.srcdoc = html;
    title.textContent = name;
    overlay.style.display = "flex";
}

function closeGame() {
    if (document.fullscreenElement) {
        document.exitFullscreen();
    }
    document.getElementById("gameFrame").srcdoc = "";
    document.getElementById("overlay").style.display = "none";
}

function toggleFullscreen() {
    const modal = document.getElementById("gameModal");
    if (!document.fullscreenElement) {
        modal.requestFullscreen();
    } else {
        document.exitFullscreen();
    }
}
</script>
